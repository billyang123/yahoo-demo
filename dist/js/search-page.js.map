{"version":3,"sources":["webpack:///./src/js/ui/paging.js","webpack:///./src/js/core/utils.js","webpack:///./src/js/search-page.js","webpack:///./src/js/core/config.js","webpack:///./src/js/ui/countDown.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,oDAAoD,oBAAoB;AACxE;AACA;AACA;AACA;AACA,SAAS;AACT,2BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,8DAA8D,OAAO;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,uB;;;;;;;ACnLA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,sCAAsC,SAAS;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;ACpGA;AAAA;AAAA;AACA;AACA;;AAEa;;;AAGb;AACA;AACA,QAAQ,qDAAqD;;;AAG7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;ACLA;AACA;AACA;AACA;AACA,SAAS,IAAI;AACb,8BAA8B;AAC9B,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA","file":"search-page.js","sourcesContent":["//https://github.com/tianxiangbing/paging/tree/master/src\nvar $ = require('jquery');\n$.fn.Paging = function (settings) {\n    var arr = [];\n    $(this).each(function () {\n        var options = $.extend({\n            target: $(this)\n        }, settings);\n        var lz = new Paging();\n        lz.init(options);\n        arr.push(lz);\n    });\n    return arr;\n};\n\nfunction Paging() {\n    var rnd = Math.random().toString().replace('.', '');\n    this.id = 'Paging_' + rnd;\n}\nPaging.prototype = {\n    init: function (settings) {\n        this.settings = $.extend({\n            callback: null,\n            pagesize: 10,\n            current: 1,\n            prevTpl: \"上一页\",\n            nextTpl: \"下一页\",\n            firstTpl: \"首页\",\n            lastTpl: \"末页\",\n            ellipseTpl: \"...\",\n            toolbar: false,\n            hash: false,\n            pageSizeList: [5, 10, 15, 20]\n        }, settings);\n        this.target = $(this.settings.target);\n        this.container = $('<div id=\"' + this.id + '\" class=\"ui-paging-container\"/>');\n        this.target.append(this.container);\n        this.render(this.settings);\n        this.format();\n        this.bindEvent();\n    },\n    render: function (ops) {\n        typeof ops.count !== 'undefined' ? this.count = ops.count : this.count =this.settings.count;\n        typeof ops.pagesize!== 'undefined' ?  this.pagesize = ops.pagesize : this.pagesize = this.settings.pagesize;\n        typeof ops.current!== 'undefined' ? this.current = ops.current: this.current = this.settings.current;\n        this.pagecount = Math.ceil(this.count / this.pagesize);\n        this.format();\n    },\n    bindEvent: function () {\n        var _this = this;\n        this.container.on('click', 'li.js-page-action,li.ui-pager', function (e) {\n            if ($(this).hasClass('ui-pager-disabled') || $(this).hasClass('focus')) {\n                return false;\n            }\n            if ($(this).hasClass('js-page-action')) {\n                if ($(this).hasClass('js-page-first')) {\n                    _this.current = 1;\n                }\n                if ($(this).hasClass('js-page-prev')) {\n                    _this.current = Math.max(1, _this.current - 1);\n                }\n                if ($(this).hasClass('js-page-next')) {\n                    _this.current = Math.min(_this.pagecount, _this.current + 1);\n                }\n                if ($(this).hasClass('js-page-last')) {\n                    _this.current = _this.pagecount;\n                }\n            } else if ($(this).data('page')) {\n                _this.current = parseInt($(this).data('page'));\n            }\n            _this.go();\n        });\n        /*\n        $(window).on('hashchange',function(){\n            var page=  parseInt(Query.getHash('page'));\n            if(_this.current !=page){\n                _this.go(page||1);\n            }\n        })\n         */\n    },\n    go: function (p) {\n        var _this = this;\n        this.current = p || this.current;\n        this.current = Math.max(1, _this.current);\n        this.current = Math.min(this.current, _this.pagecount);\n        this.format();\n        if (this.settings.hash) {\n            Query.setHash({\n                page: this.current\n            });\n        }\n        this.settings.callback && this.settings.callback(this.current, this.pagesize, this.pagecount);\n    },\n    changePagesize: function (ps) {\n        this.render({\n            pagesize: ps\n        });\n        this.settings.changePagesize && this.settings.changePagesize.call(this, this.pagesize,this.current, this.pagecount);\n    },\n    format: function () {\n        var html = '<ul>'\n        html += '<li class=\"js-page-first js-page-action ui-pager\" >' + this.settings.firstTpl + '</li>';\n        html += '<li class=\"js-page-prev js-page-action ui-pager\">' + this.settings.prevTpl + '</li>';\n        if (this.pagecount > 6) {\n            html += '<li data-page=\"1\" class=\"ui-pager\">1</li>';\n            if (this.current <= 2) {\n                html += '<li data-page=\"2\" class=\"ui-pager\">2</li>';\n                html += '<li data-page=\"3\" class=\"ui-pager\">3</li>';\n                html += '<li class=\"ui-paging-ellipse\">' + this.settings.ellipseTpl + '</li>';\n            } else\n                if (this.current > 2 && this.current <= this.pagecount - 2) {\n                    if (this.current > 3) {\n                        html += '<li>' + this.settings.ellipseTpl + '</li>';\n                    }\n                    html += '<li data-page=\"' + (this.current - 1) + '\" class=\"ui-pager\">' + (this.current - 1) + '</li>';\n                    html += '<li data-page=\"' + this.current + '\" class=\"ui-pager\">' + this.current + '</li>';\n                    html += '<li data-page=\"' + (this.current + 1) + '\" class=\"ui-pager\">' + (this.current + 1) + '</li>';\n                    if (this.current < this.pagecount - 2) {\n                        html += '<li class=\"ui-paging-ellipse\" class=\"ui-pager\">' + this.settings.ellipseTpl + '</li>';\n                    }\n                } else {\n                    html += '<li class=\"ui-paging-ellipse\" >' + this.settings.ellipseTpl + '</li>';\n                    for (var i = this.pagecount - 2; i < this.pagecount; i++) {\n                        html += '<li data-page=\"' + i + '\" class=\"ui-pager\">' + i + '</li>'\n                    }\n                }\n            html += '<li data-page=\"' + this.pagecount + '\" class=\"ui-pager\">' + this.pagecount + '</li>';\n        } else {\n            for (var i = 1; i <= this.pagecount; i++) {\n                html += '<li data-page=\"' + i + '\" class=\"ui-pager\">' + i + '</li>'\n            }\n        }\n        html += '<li class=\"js-page-next js-page-action ui-pager\">' + this.settings.nextTpl + '</li>';\n        html += '<li class=\"js-page-last js-page-action ui-pager\">' + this.settings.lastTpl + '</li>';\n        html += '</ul>';\n        this.container.html(html);\n        if (this.current == 1) {\n            $('.js-page-prev', this.container).addClass('ui-pager-disabled');\n            $('.js-page-first', this.container).addClass('ui-pager-disabled');\n        }\n        if (this.current == this.pagecount) {\n            $('.js-page-next', this.container).addClass('ui-pager-disabled');\n            $('.js-page-last', this.container).addClass('ui-pager-disabled');\n        }\n        this.container.find('li[data-page=\"' + this.current + '\"]').addClass('focus').siblings().removeClass('focus');\n        if (this.settings.toolbar) {\n            this.bindToolbar();\n        }\n    },\n    bindToolbar: function () {\n        var _this = this;\n        var html = $('<li class=\"ui-paging-toolbar\"><select class=\"ui-select-pagesize\"></select><input type=\"text\" class=\"ui-paging-count\"/><a href=\"javascript:void(0)\">跳转</a></li>');\n        var sel = $('.ui-select-pagesize', html);\n        var str = '';\n        for (var i = 0, l = this.settings.pageSizeList.length; i < l; i++) {\n            str += '<option value=\"' + this.settings.pageSizeList[i] + '\">' + this.settings.pageSizeList[i] + '条/页</option>';\n        }\n        sel.html(str);\n        sel.val(this.pagesize);\n        $('input', html).val(this.current);\n        $('input', html).click(function () {\n            $(this).select();\n        }).keydown(function (e) {\n            if (e.keyCode == 13) {\n                var current = parseInt($(this).val()) || 1;\n                _this.go(current);\n            }\n        });\n        $('a', html).click(function () {\n            var current = parseInt($(this).prev().val()) || 1;\n            _this.go(current);\n        });\n        sel.change(function () {\n            _this.changePagesize($(this).val());\n        });\n        this.container.children('ul').append(html);\n    }\n}\nmodule.exports = Paging\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/ui/paging.js\n// module id = 1\n// module chunks = 1 5","var $ = require('jquery');\nvar config = require('./config.js');\nvar getEnv = function() {\n\tif (window.location.protocol == 'file:') {\n\t\treturn 'file'\n\t} else {\n\t\tvar local = ['http://127.0.0.1/', 'localhost'];\n\t\tif (local.indexOf(window.location.origin)) {\n\t\t\treturn 'local'\n\t\t} else {\n\t\t\treturn 'publish'\n\t\t}\n\t}\n}\nvar doParams = function(data) {\n\tvar result = {};\n\tfor(var key in  data) {\n\t\tif (data[key] == '' || typeof(data[key]) == 'undefined' || data[key] == null) {\n\t\t\tcontinue;\n\t\t}\n\t\tresult[key] = data[key];\n\t}\n\treturn result;\n}\nvar env = getEnv();\nvar _ajax = function(options, isfilter) {\n\tvar _setting = $.extend({},options,{\n\t\tcomplete:function(XMLHttpRequest, textStatus) {\n\t\t\toptions.complete && options.complete(XMLHttpRequest, textStatus)\n\t\t},\n\t\tsuccess:function(res) {\n\t\t\toptions.success && options.success(res);\n\t\t}\n\t})\n\tconsole.log(_setting)\n\treturn $.ajax(_setting);\n}\nvar _getApi = function(api) {\n\tif (typeof(api) == 'string') {\n\t\treturn api;\n\t}\n\tif (api instanceof Array) {\n\n\t\tif (env == 'local' || env == 'file') {\n\t\t\treturn api[0]\n\t\t} else {\n\t\t\treturn api[1]\n\t\t}\n\t} else {\n\t\treturn api;\n\t}\n\n}\nvar _getUrlParam = function(name, url) {\n\tvar rUl = '',r = null,resJson = {};\n\tif (!url) {\n\t\trUl = window.location.search.substr(1);\n\t} else {\n\t\trUl = url.split('?')[1]\n\t}\n\tif (name) {\n\t\tvar reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\n\t\tr = rUl.match(reg);\n\t\tif (r != null) return decodeURIComponent(r[2]);\n\t\treturn null;\n\t} else {\n\t\tvar arrStr = rUl.split('&');\n\t\tfor (var i = 0, len = arrStr.length; i < len; i++) {\n\t\t\tvar str = arrStr[i];\n\t\t\tvar _arr = str.split('=');\n\t\t\tif (!_arr[0]) continue;\n\t\t\tresJson[_arr[0]] = _arr[1];\n\t\t}\n\t\treturn resJson\n\t}\n}\nvar _setUrlParam = function(obj, url) {\n\tvar curParams = _getUrlParam(false, url);\n   \tvar newParams = $.extend({},curParams,obj);\n   \tvar str = $.param(newParams);\n   \tif (!url) {\n   \t\turl = window.location.href;\n   \t}\n   \tvar ors = url.split('?')[0];\n\tif (ors) {\n\t\treturn ors + '?' + str;\n\t} else {\n\t\treturn url + '?' + str;\n\t}\n}\nvar utils = {\n\tgetUrlParam: _getUrlParam,\n\tsetUrlParam: _setUrlParam,\n\tapi: config.api,\n\tenv: env,\n\tdoParams: doParams,\n\tajax: _ajax,\n\tgetApi: _getApi\n}\n\nmodule.exports = utils\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/core/utils.js\n// module id = 2\n// module chunks = 0 1","var $ = require('jquery');\nvar Paging = require('ui/paging.js');\nvar countDown = require('ui/countDown.js');\n\nimport {ajax} from 'core/utils.js'\n\n\n$('[data-countdown]').countdown();\nvar p = new Paging();\np.init({target:'#pageBox',pagesize:10,count:100,toolbar:true});\n\n\nvar searchPage = function() {\n  this.init();\n}\nsearchPage.prototype = {\n  init() {\n    console.log(ajax);\n    ajax({\n      url: '/api/category.html',\n      dataType: 'json',\n      success(res) {\n        console.log(res);\n      }\n    })\n  }\n};\nnew searchPage()\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/search-page.js\n// module id = 21\n// module chunks = 1","module.exports = {\n\tapi: {\n\t\tcenterIndex: ['/mock/center.json', '#'],\n\t\tcenterList: ['/mock/center-list.json', '#']\n\t}\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/core/config.js\n// module id = 3\n// module chunks = 0 1","var $ = require('jquery');\nvar countDown = function(container,options) {\n  this.$container = $(container);\n  var optionsStr = this.$container.data('countdown');\n  if (/\\{.+\\}/.test(optionsStr)) {\n    this.options = $.extend({}, eval('('+optionsStr+')') ,options)\n  } else {\n    this.options = options;\n  }\n  this.format = this.options.format || 'dd天hh小时mm分钟ss秒';\n  if (this.options.diffTime) {\n    this.diffTime = this.options.diffTime;\n  } else {\n    this.deadline = this.options.deadline || '2018-03-12 12:00:00';\n  }\n  this.tm = null;\n  this.init();\n}\ncountDown.prototype = {\n  init: function(){\n    var _this = this;\n    this.shoutDown();\n    this.tm = setInterval(function(){\n      _this.shoutDown()\n    }, 1000)\n  },\n  setTm: function(time) {\n    var _this = this;\n    var str = this.format;\n    var obj = {\n      'dd': parseInt(time/1000/60/60/24,10),\n      'hh': parseInt(_this.format.indexOf('dd') > -1 ? time/1000/60/60%24 : time/1000/60/60 ,10),\n      'mm': parseInt(_this.format.indexOf('hh') > -1 ? time/1000/60%60 : time/1000/60 ,10),\n      'ss': parseInt(_this.format.indexOf('mm') > -1 ? time/1000%60 : time/1000 ,10),\n    }\n    for (var idx in obj) {\n      if (str.indexOf(idx) > -1) {\n        str = str.replace(idx,obj[idx] < 10 ? '0' + obj[idx] : obj[idx])\n      }\n    }\n    this.$container.html(str);\n  },\n  stTime:function(time) {\n    if (time <= 0) {\n      this.tm && clearInterval(this.tm);\n      time = 0;\n    }\n\n    this.setTm(time);\n  },\n  shoutDown:function() {\n    var _time = new Date(this.deadline);\n    if(this.diffTime) {\n        this.diffTime --;\n        this.stTime(this.diffTime)\n    } else {\n      var nowtime = new Date();\n      this.stTime(_time - nowtime)\n    }\n  }\n};\nvar defualts = {\n  format: 'dd天hh小时mm分钟ss秒',\n  deadline: '2018-03-12 12:00:00'\n}\n$.fn.countdown = function (options) {\n  var me = this;\n  var opts = $.extend({}, defualts, options);\n  this.each(function(){\n    if(!$(this).data('countDown')) {\n      $(this).data('countDown', new countDown(this, opts))\n    }\n  })\n  return this;\n}\nmodule.exports = countDown;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/ui/countDown.js\n// module id = 4\n// module chunks = 0 1"],"sourceRoot":""}